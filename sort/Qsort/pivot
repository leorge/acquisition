#!/bin/sh
#
# Estimate to discontinue randomization.
#
#   -h : quicksort with a pivot Hole.
#   -t : quick sort to estimate multiple median-of.
#   -P l,m : threshold to change the choice of Pivot.
#       N <= l -- middle element.
#       N <= m -- random element.
#
if [ $# -eq 0 ]; then
    echo "Usage : $0  Number  [data_file]"
else
    N=$1; shift
    Release/Sort -N $N -Z 16   -htP $N    $* | sed 's/quick_pivot/middle/'
    Release/Sort -N $N -Z 16    -tP 15,$N $* | grep -v 'qsort.3.'
    Release/Sort -N $N -Z 16    -tP  0,$N $* | grep -v 'qsort.3.' | sed 's/quick_pivot/random/'
fi

exit

# pivot in Qsort.ods

$ performance $0 26 20

start    : Sun Jun 18 20:48:40 UTC 2017
computer : archiso 4.8.6-1-ARCH #1 SMP PREEMPT Mon Oct 31 18:51:30 CET 2016 unknown GNU/Linux
operator : root
option   : pivot 26 20
stop     : Mon Jun 19 18:55:56 UTC 2017
1
log2(N)       12   13   14   15   16    17    18    19     20     21     22      23      24      25       26
qsort(3)      946  1400 2993 6586 14129 30131 64248 133811 285693 613403 1306736 2685521 5620470 11801382 24542038
quick_hole()  612  1288 2702 6300 13727 28965 59106 123307 256521 542405 1152244 2454912 5081467 10699957 22588542
middle()      644  1370 2917 6599 13568 30961 61797 132804 272975 572531 1258925 2610154 5366908 11424730 23732110
quick_pivot() 642  1390 3050 6396 13774 31330 62689 133179 282637 590666 1241499 2575567 5434556 11339421 23624620
random()      655  1505 3018 6675 13949 31547 64545 136005 283165 592230 1248891 2608836 5536717 11562962 23985622

2
log2(N)       12   13   14   15   16    17    18    19     20     21     22      23      24      25       26
qsort(3)      642  1405 2994 6897 14131 30186 64256 137042 286076 609649 1305762 2686516 5609960 11748122 24494945
quick_hole()  622  1352 2820 6250 13948 27733 60782 124602 259357 547883 1194922 2414801 5074656 10588760 22586400
middle()      664  1396 3006 6287 13605 28602 62577 129792 284374 576977 1224524 2536147 5377663 11430129 23910376
quick_pivot() 635  1423 3233 6837 13799 29131 62832 136584 288043 585128 1230383 2582271 5431503 11357387 23641769
random()      680  1473 3218 6695 14182 30354 63294 135606 288804 593824 1257179 2610586 5557188 11506276 23866938

3
log2(N)       12   13   14   15   16    17    18    19     20     21     22      23      24      25       26
qsort(3)      645  1423 3019 6573 13775 30209 64242 136937 290688 608194 1277385 2677244 5619683 11775055 24493482
quick_hole()  615  1427 2852 6445 12985 28138 62140 131401 279333 551669 1150496 2479371 5222608 10660989 22379927
middle()      679  1468 3003 6516 13841 29640 62806 131172 277224 581521 1211483 2568084 5449331 11339832 23464829
quick_pivot() 637  1414 3061 6480 13524 29669 63000 133096 276527 583968 1227069 2576686 5436837 11342397 23595118
random()      673  1420 3116 6505 14238 31438 62610 134941 288283 596328 1240655 2612129 5509692 11545787 24037130

4
log2(N)       12   13   14   15   16    17    18    19     20     21     22      23      24      25       26
qsort(3)      641  1386 2992 6520 14125 30195 64124 136924 290424 609264 1282800 2680424 5642224 11757941 24544657
quick_hole()  619  1287 2722 6521 13733 29256 60370 124798 273115 546656 1151365 2445618 5098573 10709646 22704516
middle()      677  1393 2996 6475 14186 30226 64084 134616 286315 588277 1221944 2564394 5393345 11430002 23506142
quick_pivot() 655  1484 3005 6382 14261 29804 66531 136801 275512 596820 1228602 2593353 5435453 11345369 23738828
random()      672  1467 3153 6646 14160 29552 64342 140587 286391 591542 1252208 2644306 5556023 11522740 23975089

5
log2(N)       12   13   14   15   16    17    18    19     20     21     22      23      24      25       26
qsort(3)      965  1435 2984 6446 13778 30181 62631 137193 291440 614210 1286211 2690559 5643147 11803035 24499049
quick_hole()  588  1380 2795 6192 13371 28067 59611 125083 266965 546329 1178512 2436803 5104389 10682973 22444541
middle()      628  1403 2939 6774 13742 29831 63574 133286 277533 580545 1217087 2541775 5350012 11282094 23581244
quick_pivot() 651  1397 3059 6489 13600 31338 61338 133622 282330 586071 1252920 2577370 5457220 11365445 23674869
random()      690  1451 3133 6716 14285 30377 63003 136156 287806 590787 1275168 2620748 5547966 11499546 23947583

6
log2(N)       12   13   14   15   16    17    18    19     20     21     22      23      24      25       26
qsort(3)      648  1384 3061 6466 14106 30292 62745 137172 291695 614651 1277760 2697326 5668220 11734081 24486316
quick_hole()  603  1286 2850 6057 12552 28080 57687 123641 273540 563976 1157241 2455952 5072069 10730572 22309300
middle()      643  1358 3046 6519 13886 29348 61225 131092 277448 587531 1215316 2562554 5405379 11299016 23735126
quick_pivot() 639  1385 3036 6818 13748 29650 65340 129209 276573 600574 1229404 2585673 5426693 11379447 23767467
random()      676  1469 3284 6505 13839 30501 67464 135509 279655 603628 1254621 2629711 5500126 11509262 24026084

7
log2(N)       12   13   14   15   16    17    18    19     20     21     22      23      24      25       26
qsort(3)      941  1392 2999 6599 13821 30225 64617 138272 290740 618941 1281087 2677746 5649317 11783106 24527549
quick_hole()  595  1267 2890 6325 12956 29160 59289 127483 263542 547391 1172516 2424251 5169243 10618124 22772565
middle()      650  1346 3046 6598 13306 30491 63161 133671 282949 576069 1219722 2625016 5488437 11327317 23482297
quick_pivot() 639  1413 3077 6809 13492 28996 62836 132861 284512 584908 1230468 2584031 5408138 11398082 23660556
random()      672  1496 3134 6752 13952 32667 64417 133493 286565 591753 1249192 2613938 5517142 11529193 24082256

8
log2(N)       12   13   14   15   16    17    18    19     20     21     22      23      24      25       26
qsort(3)      652  1401 3062 6435 13805 30170 64296 137157 290199 621289 1280999 2715771 5617236 11736471 24486957
quick_hole()  587  1341 3036 6256 13167 29421 58899 127153 258020 563483 1155477 2422755 5209479 10736810 22380350
middle()      616  1475 3219 6492 13603 29169 63347 128103 272523 595068 1257307 2535344 5461277 11378498 23778726
quick_pivot() 646  1424 3132 6479 13937 31206 61648 129622 283464 585395 1228393 2572836 5418223 11307336 23832217
random()      667  1499 3216 6930 14098 29793 63272 136003 287460 596408 1268435 2628853 5510332 11476182 23893850

9
log2(N)       12   13   14   15   16    17    18    19     20     21     22      23      24      25       26
qsort(3)      1137 1387 3076 6434 14228 30154 62566 137498 284223 609927 1305105 2680706 5741232 11747269 24495413
quick_hole()  635  1289 2927 6224 13879 27724 57702 123902 259177 544463 1189366 2417694 5172741 10618082 22587005
middle()      637  1374 3124 6442 14116 29312 61362 131716 273488 582826 1238534 2612900 5386231 11261626 23699542
quick_pivot() 642  1465 3063 6481 13812 29625 63154 132700 279616 585836 1231135 2598512 5421688 11305826 23738813
random()      673  1454 3045 6672 14970 29637 63632 135586 288470 592127 1250188 2629477 5525971 11550697 24075658

10
log2(N)       12   13   14   15   16    17    18    19     20     21     22      23      24      25       26
qsort(3)      641  1399 2989 6574 14148 30336 64270 136509 287929 609404 1276925 2692124 5614964 11743084 24529453
quick_hole()  611  1286 2834 6533 12742 29001 62501 120978 258262 543357 1158623 2413363 5186046 10763002 22335166
middle()      653  1334 2998 6357 13554 30581 62190 130191 277276 581370 1225026 2559501 5394686 11238130 23659313
quick_pivot() 640  1466 2968 6512 13556 29592 62920 136218 280826 585328 1235062 2570183 5477708 11407839 23562624
random()      656  1422 3151 6653 14285 32337 62678 139216 283819 589011 1256804 2636172 5545068 11574097 23994099

11
log2(N)       12   13   14   15   16    17    18    19     20     21     22      23      24      25       26
qsort(3)      644  1418 3064 6482 13667 29330 64496 137041 290535 613671 1273129 2683278 5613586 11782656 24490276
quick_hole()  582  1383 2986 5882 12950 27744 60329 124128 266165 543866 1147213 2426290 5118876 10692033 22405780
middle()      648  1424 3099 6286 13778 29232 62808 135267 275027 577421 1229345 2558898 5409077 11284516 23696304
quick_pivot() 665  1466 3033 6373 13812 29061 62785 133234 275269 594172 1225826 2579447 5417506 11334049 23830316
random()      697  1466 3119 7040 14738 32442 63355 132370 286698 594348 1247921 2614864 5513639 11591972 24012281

12
log2(N)       12   13   14   15   16    17    18    19     20     21     22      23      24      25       26
qsort(3)      639  1383 3063 6585 13760 30262 64184 137010 284945 611485 1277794 2682527 5614439 11772463 24502634
quick_hole()  600  1323 3032 6183 13086 27754 59070 126752 258854 552335 1151277 2464111 5142215 10611660 22592066
middle()      639  1390 3203 6327 13589 29267 62616 129993 272565 574143 1228012 2608142 5513543 11360154 23749004
quick_pivot() 653  1400 2981 6511 14899 28947 62026 132972 283478 585446 1231489 2577574 5439149 11392762 23671101
random()      689  1430 3125 6696 14139 29702 64388 136233 280474 595833 1252855 2636897 5507303 11443770 23940613

13
log2(N)       12   13   14   15   16    17    18    19     20     21     22      23      24      25       26
qsort(3)      658  1393 3076 6667 14155 29360 64346 137229 286829 621099 1287660 2677811 5614950 11751519 24465512
quick_hole()  643  1309 2855 6386 13747 27589 61648 121516 255614 583714 1155423 2423663 5091898 10581268 22378781
middle()      669  1370 3087 6952 15230 28857 61827 127753 271275 588199 1225010 2572414 5438376 11346590 23565632
quick_pivot() 682  1471 3140 6840 14613 30623 62932 130955 281421 585547 1230362 2582130 5406640 11304713 23693190
random()      658  1415 3078 6480 14208 31185 66419 135364 288586 611166 1251110 2614671 5502187 11432405 24031728

14
log2(N)       12   13   14   15   16    17    18    19     20     21     22      23      24      25       26
qsort(3)      639  1403 2986 6491 13843 29526 64183 137014 290715 623759 1305412 2675480 5630185 11754497 24471210
quick_hole()  597  1289 2812 6184 12526 27629 59126 126639 256699 545762 1182311 2422429 5184713 10737968 22313358
middle()      618  1400 2925 6383 13464 29245 61330 129128 271553 582189 1220795 2553968 5356261 11241072 23724856
quick_pivot() 649  1466 3212 6541 13476 29242 62900 133992 274531 579321 1258602 2590514 5406088 11393108 23544638
random()      689  1507 3125 6642 13830 30272 64437 135964 286689 594876 1250200 2624169 5481748 11539555 24148155

15
log2(N)       12   13   14   15   16    17    18    19     20     21     22      23      24      25       26
qsort(3)      770  1422 2988 6424 14142 29469 63974 136944 290709 620761 1309900 2681744 5636990 11747715 24524309
quick_hole()  616  1318 2881 6068 13474 27907 59166 127561 266213 563133 1187669 2432675 5104328 10638384 22377337
middle()      640  1382 3053 6466 14577 29127 63028 131788 280664 599682 1247716 2571098 5416995 11348432 23941704
quick_pivot() 641  1468 3058 6525 14734 30613 62892 133860 274239 584042 1222242 2580649 5437089 11409618 23685345
random()      695  1507 3128 6679 13846 30217 62877 134308 286548 598950 1248154 2621901 5518446 11540733 23878358

16
log2(N)       12   13   14   15   16    17    18    19     20     21     22      23      24      25       26
qsort(3)      644  1422 2990 6581 14133 30195 64208 136908 290950 606056 1280672 2682916 5618568 11754962 24522620
quick_hole()  586  1365 2736 6131 13676 27752 58598 125463 265561 543713 1158424 2451038 5167017 10700884 22231687
middle()      631  1407 2936 6199 14446 29492 62951 132738 275011 578523 1222780 2587310 5395263 11262656 23639789
quick_pivot() 656  1470 3144 6545 14404 29640 62707 132690 283310 581022 1234342 2598409 5423745 11361288 23539549
random()      691  1468 3194 6533 13928 31526 62662 133409 279623 589882 1251307 2606167 5492131 11496596 24070871

17
log2(N)       12   13   14   15   16    17    18    19     20     21     22      23      24      25       26
qsort(3)      638  1422 3072 6587 14166 30203 64265 136884 284294 607882 1274724 2721447 5617633 11757569 24481624
quick_hole()  594  1331 2854 6328 13862 27906 60782 127789 262984 554156 1152948 2513977 5104919 10770691 23048059
middle()      645  1340 3029 6798 14623 28781 62072 134066 274061 578562 1228526 2595102 5450047 11449066 23627545
quick_pivot() 642  1423 3078 6518 13885 29062 62931 132094 275900 580082 1225339 2608583 5460149 11381706 23789135
random()      689  1474 3122 6627 15161 30181 62776 133175 288004 607359 1256252 2624039 5500957 11489260 23952292

18
log2(N)       12   13   14   15   16    17    18    19     20     21     22      23      24      25       26
qsort(3)      656  1410 3068 6575 14151 29544 64304 137004 290819 616104 1279974 2696445 5670251 11741294 24505346
quick_hole()  614  1316 3021 6494 13008 27358 59515 124001 268877 545559 1164881 2429597 5163625 10853209 22535062
middle()      677  1406 3078 6694 14062 29387 62149 129381 281992 575258 1239433 2564168 5545346 11271164 23459511
quick_pivot() 669  1385 3029 6630 13814 29573 61713 136528 288402 594409 1254332 2572810 5410328 11393015 23680093
random()      685  1435 3060 6484 13926 30340 62756 135674 282313 611210 1255562 2626326 5485476 11495718 24103593

19
log2(N)       12   13   14   15   16    17    18    19     20     21     22      23      24      25       26
qsort(3)      638  1382 3063 6570 13824 30233 64215 136803 290331 606358 1280490 2683323 5626057 11753587 24504260
quick_hole()  622  1355 3132 6169 12660 29249 59545 129717 267463 548869 1165199 2478669 5161023 10691469 22426938
middle()      629  1380 3345 6412 13303 29636 62154 137829 282710 577151 1223743 2598458 5385267 11281263 23725094
quick_pivot() 640  1440 2986 6484 14583 29838 62482 132963 282743 598598 1257710 2604321 5405717 11332893 23732406
random()      683  1529 3159 6519 14427 29913 62820 136017 287200 593264 1253691 2631329 5523161 11492468 24013184

20
log2(N)       12   13   14   15   16    17    18    19     20     21     22      23      24      25       26
qsort(3)      653  1381 3060 6560 13878 30224 63339 137098 290771 607977 1305388 2681932 5654864 11810102 24672550
quick_hole()  609  1344 2793 6046 13200 28003 57869 130525 255618 555394 1232334 2410530 5099008 10996496 22752504
middle()      663  1414 2901 6590 13686 30442 61384 132964 278095 582169 1213586 2547138 5373893 11370772 23416095
quick_pivot() 665  1416 3064 6854 13671 30007 63180 133293 282344 591689 1221423 2597950 5425030 11400776 23680042
random()      709  1501 3236 6679 14238 30499 62826 141746 286926 592692 1277077 2627159 5537249 11498473 24045147


@
