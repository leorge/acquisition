#!/bin/sh
#
# Compare quick_asymm.c and quick_random.c
#
#   -h : quicksort with a pivot Hole.
#   -t : quicksort : chose the median of several elements as a pivoT.
#   -P l,m,n,o : threshold to change the choice of Pivot.
#       N <= l -- middle element.
#       N <= m -- median of 3 elements.
#       N <= o -- median of (log2(N)-1)|1 elements.
#       else   -- median of (log2(N)/2)|1 elements.
#
if [ $# -eq 0 ]; then
    echo "Usage : $0  Number  [data_file]"
else
    N=$1; shift
    Release/Sort -N $N -Z 16 -htP $N            data | sed "s/quick_pivot../middle/"
    Release/Sort -N $N -Z 16  -tP 31,0,$N         data | sed "s/quick_pivot../median-of-3/"
    Release/Sort -N $N -Z 16  -tP 127,0,0,$N      data | sed "s/quick_pivot../median-of-5/"
    Release/Sort -N $N -Z 16  -tP 255,0,0,0,0     data | sed "s/quick_pivot../median-of-log/"
#    Release/Sort -N $N -Z 16  -tP 31,0,127,$N     data | sed "s/quick_pivot../median35/"
#    Release/Sort -N $N -Z 16  -tP 31,0,127,0,0    data | sed "s/quick_pivot../median3L/"
#    Release/Sort -N $N -Z 16  -tP 127,0,0,4095,0  data | sed "s/quick_pivot../median5L/"
    Release/Sort -N $N -Z 16  -tP 31,0,127,4095,0 data | sed "s/quick_pivot../median35L/"
fi

exit

# medians in Qsort.ods

$ performance $0 26 20

start    : Wed Apr 26 18:52:08 UTC 2017
computer : archiso 4.8.6-1-ARCH #1 SMP PREEMPT Mon Oct 31 18:51:30 CET 2016 unknown GNU/Linux
operator : root
option   : medians 26 20
stop     : Fri Apr 28 05:17:12 UTC 2017
1
log2(N)       12  13   14   15   16    17    18    19     20     21     22      23      24      25       26
qsort(3)      637 1383 3146 6754 14394 30833 63910 139250 294273 628649 1307774 2757478 5785075 12113411 25054681
quick_hole()  621 1344 3005 6298 13613 27254 60097 125606 278199 552662 1211808 2542173 5109119 10837068 23413731
middle        668 1384 3069 6310 14237 29272 63065 132088 276958 582637 1229025 2584567 5369908 11354956 24508326
median-of-3   619 1370 3069 6298 13063 28809 59029 124748 283645 557205 1173622 2522526 5299636 10826207 22539825
median-of-5   624 1403 2938 6476 12975 28739 58706 127056 268935 593350 1162877 2444715 5124328 10718304 22359508
median-of-log 635 1409 3057 6148 13410 29848 63299 127280 262246 553534 1163928 2442816 5111874 10706141 22282309
median35L     626 1383 2936 6097 13292 28566 58659 126377 268121 550132 1158174 2438335 5096426 10942148 22185713

2
log2(N)       12  13   14   15   16    17    18    19     20     21     22      23      24      25       26
qsort(3)      649 1417 3128 6832 14409 30803 65435 138879 294472 628336 1314406 2777760 5800253 12124107 25372186
quick_hole()  657 1352 2803 6233 13239 27756 63558 133744 285294 579828 1179927 2492130 5142154 10753378 22381754
middle        641 1417 2967 6496 14432 29399 65914 131105 296008 582521 1240622 2574703 5347076 11303744 23573142
median-of-3   652 1410 2948 6294 13886 29964 60452 127692 268053 556451 1204117 2468390 5181731 10855613 22546545
median-of-5   651 1422 2865 6462 13327 28561 63160 133272 269006 566654 1164152 2505223 5118309 10719290 22377371
median-of-log 653 1439 2953 6144 13896 27918 60334 127031 268930 560107 1193944 2441287 5113597 10979017 22302298
median35L     650 1419 2941 6282 13801 29723 62968 132813 261381 565103 1160589 2492779 5227936 10947023 22240639

3
log2(N)       12  13   14   15   16    17    18    19     20     21     22      23      24      25       26
qsort(3)      674 1425 3342 6830 14419 30207 64778 139866 294652 631178 1324743 2762737 5812051 12072693 25110601
quick_hole()  615 1387 2951 6386 13505 29959 62574 125775 284257 596347 1177375 2475590 5258914 11048129 22961023
middle        670 1416 3119 6710 14567 30874 66808 131876 285282 590064 1225090 2591964 5497550 11304364 23591303
median-of-3   620 1373 3028 6311 13439 28663 63460 126587 263864 566773 1189738 2468014 5176291 10848674 22585556
median-of-5   632 1427 3040 6270 13354 29811 63090 125209 266207 553118 1192007 2447368 5126226 10720989 22376704
median-of-log 641 1375 2966 6149 12966 29835 58732 127178 282005 593828 1182410 2444933 5186726 10697073 22323733
median35L     640 1430 2932 6110 13831 29850 60150 126592 268037 550305 1178046 2434813 5231401 10678109 22229804

4
log2(N)       12  13   14   15   16    17    18    19     20     21     22      23      24      25       26
qsort(3)      664 1428 3124 6482 14121 30944 65438 138499 295361 628253 1315360 2765394 5783892 12080566 25108428
quick_hole()  617 1372 2959 6278 14165 27910 59521 127797 272839 549790 1211257 2554652 5170890 10810487 22811081
middle        630 1472 2932 6535 13829 28788 62718 132616 283078 578887 1254001 2620922 5451580 11640066 24063224
median-of-3   650 1374 2937 6333 13910 27975 60649 124426 263745 556670 1203057 2473417 5190260 11078430 22601866
median-of-5   631 1377 2854 6278 13351 29797 59596 133070 266093 566905 1163023 2506746 5123123 10711477 22364376
median-of-log 621 1375 2955 6302 13365 28655 63250 127368 269512 593889 1164870 2446591 5119986 10724088 22282232
median35L     650 1366 3037 6252 13862 29863 62909 123546 281505 591980 1159286 2436089 5101429 10650418 22234925

5
log2(N)       12  13   14   15   16    17    18    19     20     21     22      23      24      25       26
qsort(3)      650 1452 3150 6738 14402 30238 65593 139261 294368 626877 1313466 2758020 5806020 12070423 25146807
quick_hole()  630 1401 3025 6179 13209 29660 63906 123990 283756 564924 1226399 2451296 5246810 10851711 23004127
middle        643 1423 3061 6534 13916 29476 62668 131142 301702 592465 1269381 2576216 5556847 11363727 23507148
median-of-3   651 1374 2883 6268 13469 27899 60128 125066 284116 558169 1174421 2465394 5176499 10844326 22594129
median-of-5   632 1370 3031 6266 13332 29800 59783 133294 268443 566519 1163494 2447168 5125057 10717662 22356120
median-of-log 653 1371 2944 6519 13432 29840 63302 127332 268992 567379 1163774 2507069 5123977 10714115 22345502
median35L     653 1371 3034 6264 13272 29712 61602 126814 268006 551387 1160052 2434939 5233907 10661896 22199285

6
log2(N)       12  13   14   15   16    17    18    19     20     21     22      23      24      25       26
qsort(3)      649 1447 3169 6412 14437 30786 65567 139390 294764 629633 1317029 2757138 5781681 12064765 25163898
quick_hole()  605 1362 2869 6310 13788 29700 59418 134441 283181 598650 1167478 2461503 5150753 10913117 22603001
middle        635 1386 3085 6562 14191 29392 63162 139266 278064 579641 1210828 2573551 5397658 11435214 23489214
median-of-3   651 1374 3047 6313 13370 29880 59125 126514 264654 556680 1173533 2460643 5174636 10804731 22518067
median-of-5   650 1418 2866 6111 13297 28345 60065 124447 282044 552247 1160662 2505388 5128052 10717517 22318876
median-of-log 631 1436 2957 6497 13391 28679 63244 127168 269324 553197 1194564 2442336 5120749 10710771 22291183
median35L     652 1333 2865 6119 13272 28513 63050 133184 281599 565236 1158464 2435384 5094257 10667424 22245166

7
log2(N)       12  13   14   15   16    17    18    19     20     21     22      23      24      25       26
qsort(3)      672 1422 3064 6788 14396 30075 65300 139356 293910 632142 1321084 2760082 5763308 12042047 25304642
quick_hole()  629 1338 2952 6138 13320 29519 59870 126717 267412 553921 1175938 2442762 5232578 10777234 23182837
middle        646 1373 3027 6426 13869 31573 61784 131376 274978 598367 1229587 2621678 5381255 11308073 24172030
median-of-3   656 1371 3026 6329 13404 28725 59073 127811 263738 556992 1172088 2464706 5166872 10806463 22575596
median-of-5   641 1332 2861 6281 13320 27619 60260 133585 268893 552502 1161642 2443672 5119512 10706476 22753396
median-of-log 660 1344 2870 6294 13393 29826 60379 132496 262212 552825 1191865 2503951 5253192 10713199 22315521
median35L     651 1411 3055 6273 13057 27835 59880 126873 268092 565660 1159927 2432483 5108787 10675115 22248393

8
log2(N)       12  13   14   15   16    17    18    19     20     21     22      23      24      25       26
qsort(3)      640 1461 3112 6661 14409 30780 65553 139107 293090 626287 1310924 2769148 5767495 12065787 25129034
quick_hole()  604 1342 2903 6289 13300 29976 60486 133570 267143 564441 1186434 2529075 5149417 10915352 22732866
middle        666 1444 3219 6327 13724 31053 60307 140750 293385 591074 1259358 2625123 5456426 11269897 23928822
median-of-3   653 1336 2965 6335 13418 28668 60639 127741 283093 569690 1173740 2467129 5166602 10819366 22560796
median-of-5   652 1423 2869 6492 13827 28548 63010 126933 265774 573962 1249360 2444303 5127124 10729644 22897070
median-of-log 635 1374 2953 6503 13258 29825 59745 127179 262170 567072 1164383 2444492 5120938 10975261 22333820
median35L     626 1425 2934 6486 13294 28567 62872 126746 261342 564899 1158966 2499334 5100329 10765922 22245827

9
log2(N)       12  13   14   15   16    17    18    19     20     21     22      23      24      25       26
qsort(3)      658 1450 3292 6761 14377 30228 65132 139241 296737 627654 1318061 2777274 5782734 12046841 25212708
quick_hole()  614 1346 2827 6364 13765 27835 60060 125380 266207 555513 1180781 2513936 5104013 10888195 22395387
middle        647 1466 2930 6597 14701 29530 62716 129742 285192 596116 1214592 2615608 5376356 11374001 23777596
median-of-3   652 1414 3074 6493 13436 28689 60614 132613 284055 559871 1202632 2468000 5168178 10840109 22582312
median-of-5   650 1365 2942 6260 13317 27647 59112 132841 266548 566516 1164872 2440332 5125239 10721113 22323107
median-of-log 653 1342 2976 6508 13363 28605 63259 127308 269051 567529 1162380 2507192 5114737 10710673 22311215
median35L     651 1412 2931 6490 13318 29708 58430 126822 267972 550708 1159880 2433322 5102099 10675590 22245601

10
log2(N)       12  13   14   15   16    17    18    19     20     21     22      23      24      25       26
qsort(3)      655 1462 3162 6849 14412 30852 65432 139335 294721 628600 1321223 2757278 5774326 12046451 25342759
quick_hole()  629 1322 2969 6282 13603 29465 57621 136666 272680 597948 1209493 2485807 5320278 10801410 22574404
middle        628 1430 3051 6555 14201 29888 62685 139623 280680 622550 1228262 2579124 5533799 11634207 23576576
median-of-3   620 1336 3037 6310 13391 28667 60585 128027 270800 600347 1171735 2465225 5176550 10812506 23107702
median-of-5   618 1375 2948 6288 13327 28549 60142 127024 263848 566346 1192258 2446437 5245584 10721324 22304585
median-of-log 652 1352 2952 6302 13400 29962 63218 124061 262538 567349 1193300 2444391 5126074 10973058 22336567
median35L     653 1415 2943 6460 13333 29770 60144 132941 268134 565608 1189897 2436054 5106685 10674162 22790288

11
log2(N)       12  13   14   15   16    17    18    19     20     21     22      23      24      25       26
qsort(3)      656 1432 3143 6486 14393 30649 65079 139066 292869 627991 1310161 2772496 5802154 12087124 25157983
quick_hole()  629 1386 2912 6554 12961 28427 60766 126102 266544 582788 1206076 2571076 5168176 10764049 22497606
middle        659 1432 3059 6605 13785 28993 62383 136107 272628 600683 1250589 2570987 5409821 11452528 24089507
median-of-3   623 1405 2940 6282 13879 28728 63315 124437 284307 558138 1175446 2465137 5166222 11089728 22618794
median-of-5   649 1410 2901 6240 13284 29672 62807 126332 263355 586872 1164928 2444731 5252394 10713195 22354420
median-of-log 652 1412 2954 6147 13394 28661 63216 127423 269195 560389 1163005 2447105 5124457 10708647 22302453
median35L     636 1364 2872 6226 13247 28514 60142 126902 267852 564577 1160562 2498462 5094907 10677086 22212524

12
log2(N)       12  13   14   15   16    17    18    19     20     21     22      23      24      25       26
qsort(3)      675 1458 3070 6768 14439 30813 65155 138192 294731 628047 1323422 2774449 5755616 12044073 25076763
quick_hole()  627 1347 3024 6579 13092 30104 61948 125110 270640 567236 1173189 2543484 5160113 10912672 22528515
middle        638 1399 3030 6579 13978 29609 63562 133519 277618 601602 1228657 2646199 5387542 11563544 23811881
median-of-3   655 1352 2966 6320 13942 28212 60183 134128 270548 571261 1256891 2527062 5167477 10823316 22589443
median-of-5   648 1391 3017 6274 13353 29700 60124 125758 265847 563608 1164036 2444730 5246723 10718433 22330736
median-of-log 654 1385 3024 6546 13858 27953 63175 125406 269191 567695 1164206 2445489 5112846 10715360 22312060
median35L     639 1416 3017 6273 13293 28527 62762 133080 267866 551189 1190078 2495047 5103554 10678751 22238516

13
log2(N)       12  13   14   15   16    17    18    19     20     21     22      23      24      25       26
qsort(3)      660 1462 3024 6754 14492 30863 65363 138200 291893 628185 1321226 2771960 5740456 11992462 25154668
quick_hole()  642 1388 3054 6325 13072 28288 63590 124796 262564 563858 1173054 2437536 5455688 11018155 22549866
middle        658 1441 3168 6526 14191 29120 66056 132031 272797 606724 1237784 2604681 5534892 11281960 24301031
median-of-3   651 1375 2950 6171 13368 30065 63434 127867 268207 556821 1201188 2464521 5172639 10830407 22567821
median-of-5   650 1401 2944 6471 13799 27793 63163 126104 268893 552201 1165721 2446512 5124792 10720193 22356611
median-of-log 630 1427 2954 6311 13341 28392 60444 127335 282158 552879 1163504 2440257 5119831 10711214 22338054
median35L     632 1376 2856 6258 12983 28462 58296 125751 265331 559912 1167111 2497919 5105497 10672688 22216037

14
log2(N)       12  13   14   15   16    17    18    19     20     21     22      23      24      25       26
qsort(3)      650 1458 3066 6757 14324 30852 65305 139527 293632 630319 1329942 2764888 5815947 12096666 25188568
quick_hole()  639 1381 2939 6458 13198 29846 59780 138236 266047 595948 1183056 2490327 5139696 11062401 22550290
middle        649 1412 3034 6599 13799 30289 63030 139423 285888 618964 1228068 2587155 5376546 11269449 23629369
median-of-3   652 1340 2947 6294 13926 28595 63438 127711 271445 570422 1203203 2526072 5172483 10820112 22589309
median-of-5   624 1364 2943 6501 13330 28481 60206 127118 279918 566912 1165178 2507460 5123295 10974696 22364341
median-of-log 655 1346 3053 6311 13234 28644 60454 127380 262236 553429 1165656 2507204 5250385 10695515 22292218
median35L     648 1335 2944 6275 14030 29760 60125 126767 280915 565634 1158523 2433398 5229990 10675725 22242378

15
log2(N)       12  13   14   15   16    17    18    19     20     21     22      23      24      25       26
qsort(3)      639 1424 3108 6599 14139 30882 65425 139628 294359 631106 1326470 2775238 5781680 12127395 25218423
quick_hole()  643 1319 2957 6364 13609 27332 60863 128758 283690 571185 1168152 2462945 5273602 11037146 22858781
middle        661 1404 2990 6712 14696 29552 62894 130597 284050 582426 1245366 2560622 5601893 11420250 23701704
median-of-3   638 1432 2973 6302 13440 28649 60429 126118 263962 559381 1192905 2466001 5171516 10830235 22598523
median-of-5   619 1420 2862 6281 13211 27636 62986 126818 268260 552513 1194870 2445974 5118660 10739209 22356758
median-of-log 622 1382 2882 6504 13008 29914 63173 127179 262386 553368 1194422 2443020 5117150 10708602 22310495
median35L     619 1420 2933 6272 13781 28479 58544 126899 280977 551014 1227158 2448745 5099603 10672783 22230637

16
log2(N)       12  13   14   15   16    17    18    19     20     21     22      23      24      25       26
qsort(3)      662 1489 3122 6870 14153 30669 65073 139118 293934 629135 1313953 2777942 5775379 12138684 25159926
quick_hole()  633 1372 2887 6051 13600 29877 61396 124182 264606 558491 1193920 2494781 5137564 10866501 22458868
middle        640 1490 3011 6242 14237 30756 64672 129943 283283 581288 1253486 2555670 5465528 11444957 23891632
median-of-3   628 1339 2887 6302 13474 29910 59649 134330 270384 556875 1174916 2467701 5183077 10833950 22581012
median-of-5   625 1334 2940 6229 13364 29617 58888 133203 266661 552540 1190159 2507642 5118487 10703842 22326616
median-of-log 631 1371 3073 6309 13423 29890 58882 133352 281940 553273 1165603 2445021 5113691 10720297 22301390
median35L     651 1491 2943 6253 13297 28469 58548 126670 281083 565393 1159960 2493588 5106744 10677350 22195149

17
log2(N)       12  13   14   15   16    17    18    19     20     21     22      23      24      25       26
qsort(3)      674 1393 3161 6680 14431 30948 65499 138686 294161 625137 1314440 2769415 5790311 12059232 25172893
quick_hole()  610 1327 2936 6337 13588 29401 63159 127371 271241 548225 1163185 2476612 5310090 10981544 22397263
middle        632 1396 3134 6580 14288 30417 66428 130224 283971 585730 1231482 2556401 5352095 11371304 23532091
median-of-3   632 1412 2942 6149 13447 29920 58960 127624 268483 566203 1174204 2523189 5169596 10837926 22585944
median-of-5   632 1399 2856 6263 13331 28530 60194 127225 268578 566477 1162650 2444311 5243903 10709996 22339886
median-of-log 658 1389 2943 6296 13978 28691 60339 133439 262430 567486 1164023 2443942 5119218 10977780 22317620
median35L     636 1388 2938 6114 12969 28541 62975 126621 268011 551202 1159733 2436900 5102916 10663898 22257515

18
log2(N)       12  13   14   15   16    17    18    19     20     21     22      23      24      25       26
qsort(3)      671 1466 3386 6812 14391 30660 65006 138762 294512 632070 1309770 2757144 5756999 12008091 24968193
quick_hole()  608 1360 2908 6347 13626 29534 62670 128939 294482 547202 1175575 2499735 5236812 10899142 22457264
middle        640 1461 3005 6766 14276 30528 65793 140450 303093 585421 1227466 2631456 5457836 11356772 23962806
median-of-3   621 1414 3042 6284 13334 28759 63408 124674 267932 598823 1176064 2471103 5175348 10818775 22619187
median-of-5   647 1338 2929 6287 13793 29787 63191 126868 268348 594494 1176204 2541082 5123354 10718018 22353535
median-of-log 631 1341 3065 6129 13428 28667 63266 127078 262186 568115 1181851 2441668 5119241 10690329 22304341
median35L     651 1365 2920 6100 12938 29823 58638 126721 281040 564821 1159539 2433095 5104974 10663740 22212923

19
log2(N)       12  13   14   15   16    17    18    19     20     21     22      23      24      25       26
qsort(3)      678 1429 3151 6719 13991 30144 64984 136132 294027 630204 1328096 2775092 5769600 12062311 25152663
quick_hole()  635 1332 2978 6436 13656 28018 59597 129720 269196 558964 1188593 2523747 5169110 10873960 23003377
middle        643 1405 3092 6716 14257 29936 61590 129233 279183 575597 1245762 2665161 5342768 11354752 23581026
median-of-3   638 1337 2946 6319 13893 30008 60440 126501 271120 557587 1204829 2470450 5174443 10805953 22555129
median-of-5   621 1413 2862 6274 13829 27799 63022 126995 281810 552393 1178356 2447557 5125277 10971460 22334223
median-of-log 630 1343 2884 6138 12967 28638 60425 125813 269244 554660 1192398 2445468 5123908 10705090 22844100
median35L     627 1369 3022 6264 13178 29758 60129 123576 268096 565018 1244052 2462890 5095554 10663283 22240064

20
log2(N)       12  13   14   15   16    17    18    19     20     21     22      23      24      25       26
qsort(3)      650 1441 3068 6765 14494 30529 64870 138825 294618 628383 1323665 2771288 5772440 12059312 25202113
quick_hole()  637 1430 2914 6195 13303 28195 63228 129506 284499 568935 1207248 2539935 5198403 10875818 22758256
middle        677 1412 2932 6528 13512 29482 66678 128807 286640 599747 1249646 2643484 5452303 11366846 23764666
median-of-3   631 1420 2953 6299 13453 30044 58995 134608 267896 571968 1202613 2467394 5168928 10828787 22644225
median-of-5   617 1381 2936 6469 13377 28510 58734 126927 262137 594555 1163356 2446737 5131170 10719141 22387497
median-of-log 623 1377 3039 6132 13340 29809 59711 133554 269198 567538 1163550 2445306 5120142 10709065 22876960
median35L     654 1336 2934 6479 13862 29731 60114 125599 264434 560133 1182186 2434321 5104280 10674935 22210301

@
