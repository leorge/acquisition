#!/bin/sh
#
#   Indexed asymmetric Quicksort
#
#   -q   : asymmetric Quicksort
#   -I q : indirect asymmetric quicksort
#   -B n : Boundary number to change to an indirect sorting function
#   -P l,m,n,s,t : threshold to change the choice of Pivot.
#      N <= l -- middle element.
#      N <= m -- random element.
#      N <= n -- median of random 3 elements.
#      N <= s -- median of random 5 elements.
#      N <= t -- median of random log2(N)-1|1 elements.
#      else   -- median of random (int(log2(N))/2)|1 elements.
#
echo "Arguments : $*"
if [ $# -eq 0 ]; then
    echo "Usage : [opt=<size>] performance  $0  log2N  [repeat]"
else
    N=$1; shift
    size=${opt:=16}
    if ! Release/Sort -N $N -Z $size -q -I q -B $N -P 63,1,1,1,1      $* | sed 's/iqsort(&)/med-of-log/'   ; then exit ; fi
    if ! Release/Sort -N $N -Z $size    -I q -B $N -P 63,1,255,4095,1 $* | sed 's/iqsort(&)/mixed-median/' ; then exit ; fi
fi

exit

# median in FX8300.ods

$ opt=256 performance $0 23 10

start    : Thu Aug  9 19:42:24 UTC 2018
computer : archiso 4.8.6-1-ARCH #1 SMP PREEMPT Mon Oct 31 18:51:30 CET 2016 unknown GNU/Linux
CPU      : AMD FX(tm)-8300 Eight-Core Processor
operator : root
option   : 256 23 10
stop     : Thu Aug  9 22:30:55 UTC 2018
1
log2(N)       12  13   14   15    16    17    18     19     20     21      22      23
qsort(3)      822 2311 4834 9951  23360 55411 126612 283143 630335 1387940 3020948 6521092
asymm_qsort() 867 2200 4838 10353 23716 54417 122812 274099 607155 1314117 2861765 6140903
med-of-log    753 2204 4648 9705  23384 53697 120341 270483 610049 1345846 2924393 6336468
mixed-median  760 2189 4623 9640  22819 53555 119780 270155 606576 1339170 2915567 6326447
imsort(&)     820 2294 4842 10103 24160 57345 128613 288310 641280 1399127 3035777 6542626

2
log2(N)       12  13   14   15    16    17    18     19     20     21      22      23
qsort(3)      817 2310 4717 10176 23875 55294 124775 285728 633257 1388012 3011144 6511456
asymm_qsort() 849 2289 4934 10629 24215 55122 123475 273707 601354 1318128 2854249 6137996
med-of-log    754 2222 4653 9898  23201 53230 121801 272152 609666 1344883 2923472 6370356
mixed-median  766 2178 4525 9787  23008 53663 121120 271342 607942 1340023 2907955 6300446
imsort(&)     820 2297 4724 10298 24176 56431 129375 289997 639769 1399418 3031162 6544331

3
log2(N)       12  13   14   15    16    17    18     19     20     21      22      23
qsort(3)      801 2292 4904 10184 23433 54522 125003 282259 628925 1388685 3017559 6522424
asymm_qsort() 860 2236 4754 10252 24240 54994 123042 274168 602194 1316862 2863919 6134120
med-of-log    753 2201 4639 9693  23416 53442 120831 271906 610738 1341879 2938965 6321204
mixed-median  743 2032 4604 9773  22932 52852 120981 271373 605237 1339356 2924095 6332087
imsort(&)     789 2122 4813 10219 24235 56589 129120 289168 638640 1401178 3038895 6548197

4
log2(N)       12  13   14   15    16    17    18     19     20     21      22      23
qsort(3)      817 2412 4811 10148 23583 54279 127456 285330 630160 1385423 3009310 6496891
asymm_qsort() 856 2249 4701 10566 23732 54205 122706 273412 603213 1316538 2855570 6145048
med-of-log    746 2193 4566 9875  22784 53357 121084 271656 610685 1341364 2929691 6332218
mixed-median  758 2183 4604 9767  22912 52780 121719 271258 606154 1342185 2911321 6293879
imsort(&)     783 2292 4718 10300 24203 56248 129296 289789 639616 1396933 3033541 6532767

5
log2(N)       12  13   14   15    16    17    18     19     20     21      22      23
qsort(3)      790 2279 4819 10145 23398 55406 124569 286406 628352 1387678 3019326 6530772
asymm_qsort() 852 2204 4871 10350 23794 54454 122600 273036 603232 1317230 2856494 6152801
med-of-log    758 2155 4555 9820  23280 53394 120440 272563 610754 1345439 2931107 6326630
mixed-median  746 2127 4584 9812  22926 52902 120370 271926 606158 1341344 2919223 6298693
imsort(&)     783 2232 4798 10333 24117 56490 129027 289287 638102 1401098 3038440 6556468

6
log2(N)       12  13   14   15    16    17    18     19     20     21      22      23
qsort(3)      818 2370 4715 10205 23389 55595 127658 282524 631097 1388839 3015888 6532773
asymm_qsort() 884 2244 4852 10308 23993 54947 122263 273654 607183 1314391 2847645 6171206
med-of-log    749 2202 4629 9862  23380 53456 121129 272843 610247 1340320 2922855 6358856
mixed-median  763 2182 4520 9758  22920 53972 122263 272445 609525 1338515 2920454 6305788
imsort(&)     818 2296 4727 10324 24179 57471 129676 289610 639518 1400640 3043980 6552168

7
log2(N)       12  13   14   15    16    17    18     19     20     21      22      23
qsort(3)      805 2432 4722 10174 23385 55456 126691 284268 629308 1387482 3018202 6531421
asymm_qsort() 864 2225 4744 10447 24893 54637 123006 273620 603318 1320404 2857097 6157736
med-of-log    747 2151 4567 9890  23456 54049 121209 273096 608033 1345300 2926317 6320412
mixed-median  753 2179 4534 9816  22887 53541 120314 270664 606560 1341870 2917629 6322523
imsort(&)     804 2275 4730 10396 24174 56595 129213 288982 638814 1400906 3040396 6549790

8
log2(N)       12  13   14   15    16    17    18     19     20     21      22      23
qsort(3)      821 2445 4858 9964  23842 55020 124839 283536 628528 1390361 3013230 6595876
asymm_qsort() 858 2308 4883 10461 23823 54662 123192 274514 602354 1319951 2853401 6151801
med-of-log    758 2217 4654 9684  23593 54080 121912 272411 610974 1349260 2944381 6332770
mixed-median  764 2175 4620 9659  23419 52819 121131 271524 607177 1338235 2910673 6297522
imsort(&)     819 2295 4853 10124 24658 56593 129486 289858 639158 1400088 3032106 6545426

9
log2(N)       12  13   14   15    16    17    18     19     20     21      22      23
qsort(3)      825 2307 4693 10173 23480 54566 127525 285377 631726 1391357 3021011 6524543
asymm_qsort() 862 2191 4782 10538 23870 55227 123446 273909 602522 1319854 2857119 6143981
med-of-log    744 2032 4576 9912  23463 53469 120855 272847 610534 1344009 2930616 6376132
mixed-median  773 2180 4524 9812  22934 53032 122103 270086 607784 1340993 2913902 6340627
imsort(&)     824 2302 4728 10301 24212 56499 131383 288956 639397 1400662 3039454 6551934

10
log2(N)       12  13   14   15    16    17    18     19     20     21      22      23
qsort(3)      811 2311 4785 9960  23898 55318 127362 282697 630087 1389711 3021132 6510225
asymm_qsort() 887 2274 4629 10623 23612 55097 123527 274236 607755 1318054 2857724 6161913
med-of-log    767 2204 4407 9927  23051 53291 122459 272735 608810 1341284 2924862 6348146
mixed-median  753 2176 4598 9622  23213 53238 121376 271617 608324 1340193 2920082 6319560
imsort(&)     802 2303 4804 10114 24607 56376 128872 289280 640382 1400106 3038108 6538057

@
